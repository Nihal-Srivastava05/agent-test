"""
Generated test for {{ agent_name }}.

This test was automatically generated by AgentTest.
"""

from agent_test import agent_test
{%- if agent_module_path %}
from {{ agent_module_path }} import *
{%- else %}
# TODO: Import your agent functions here
# from your_module import your_function
{%- endif %}


{%- for test_case in test_cases %}
@agent_test(
    criteria=[{%- for criterion in test_case.evaluation_criteria.keys() -%}"{{ criterion }}"{%- if not loop.last %}, {% endif -%}{%- endfor -%}],
    tags={{ test_case.tags | tojson }}
)
def {{ test_case.name }}():
    """{{ test_case.description }}"""
    {%- if test_case.input_data %}
    input_data = {{ test_case.input_data | tojson }}
    {%- else %}
    input_data = {}
    {%- endif %}
    {%- if test_case.expected_behavior %}
    expected_behavior = {{ test_case.expected_behavior | tojson }}
    {%- endif %}
    
    {%- if test_case.function_to_test %}
    # Call the function being tested
    {%- if "." in test_case.function_to_test %}
    # Class method call
    {%- set class_method = test_case.function_to_test.split(".") %}
    {%- if test_case.input_data.get("_class_instance") %}
    instance = {{ class_method[0] }}(**{{ test_case.input_data._class_instance.constructor_args | tojson }})
    actual = instance.{{ class_method[1] }}({%- for key, value in test_case.input_data.items() if key != "_class_instance" -%}{{ key }}={{ value | tojson }}{%- if not loop.last %}, {% endif -%}{%- endfor -%})
    {%- else %}
    # TODO: Create instance of {{ class_method[0] }} with appropriate arguments
    # instance = {{ class_method[0] }}(api_key="your_api_key")
    # actual = instance.{{ class_method[1] }}(**input_data)
    actual = None
    {%- endif %}
    {%- else %}
    # Function call
    {%- if test_case.input_data %}
    actual = {{ test_case.function_to_test }}(**input_data)
    {%- else %}
    actual = {{ test_case.function_to_test }}()
    {%- endif %}
    {%- endif %}
    {%- else %}
    # TODO: Call your agent function here
    # actual = your_agent_function(input_data)
    actual = None  # Replace with actual function call
    {%- endif %}
    
    return {
        "input": input_data,
        {%- if test_case.expected_behavior %}
        "expected_behavior": expected_behavior,
        {%- endif %}
        "actual": actual,
        "evaluation_criteria": {{ test_case.evaluation_criteria | tojson }}
    }

{%- endfor %}
